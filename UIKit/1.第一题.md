## 1.`UIView` 和 `CALayer` 是什么关系？


`UIView` 和 `CALayer` 算是相互补充的关系。

`UIView` = `CALayer.delegate` 

`UIView` : 负责用户的交互事件。

`CALayer`: 负责图像和动画的渲染。

自己查阅资料的详解：
UIView<br>
（1）【元素基础】 iOS系统中界面元素的基础, 所有的界面元素都继承自它, <br>	
（2）【mvc模式】本身完全是由CoreAnimation来实现. 真正的绘图部分, 是由一个CALayer类来管理[model] ，使用了mvc的模式，c[UIView ] m[CALayer] , v[绘制的单元 ，cpu，gpu，屏幕].<br>
（3）【管理器】UIView更像是一个CALayer的管理器, 
	所以访问它的与绘图和坐标相关的属性, 如frame, bounds等, 实际上都是在访问其所包含的CALayer的相关属性. 
	因此, 可以在所有UIView的子类上实现动画效果. UIView继承自UIResponder, 能接收并响应事件, 负责显示内容的管理, 而CALayer继承自NSObject, 不能响应事件, 负责显示内容的绘制.

UIview 上的Layer属性： self.view.layer 获取layer属性；

```
+ (Class)layerClass {
     return [CAEAGLLayer class];
}
```
这个方法返回使用的layer的类；使UIview继承的类使用指定的layer来进行绘制，如上面代码可以使用openGL来进行绘制；

CALayer的层级关系和UIView 有点类似； 
```
CAEAGLLayer *eaglLayer = [CAEAGLLayer layer];
eaglLayer.frame = self.view.frame;
eaglLayer.opaque = YES;
eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],kEAGLDrawablePropertyRetainedBacking,kEAGLColorFormatRGBA8,kEAGLDrawablePropertyColorFormat, nil];
[self.view.layer addSublayer:eaglLayer];
```

因为CALayer是用来展示的，CALayer更新的时候不能够立即显示，可以使用setNeedsDisplay 方法来进行绘制显示；




